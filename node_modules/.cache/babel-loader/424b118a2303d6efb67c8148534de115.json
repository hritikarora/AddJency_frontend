{"ast":null,"code":"import _regeneratorRuntime from\"/home/hritik/Desktop/spring-react/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/hritik/Desktop/spring-react/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/hritik/Desktop/spring-react/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/hritik/Desktop/spring-react/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import axios from'../../node_modules/axios';var USER_API_BASE_URL=\"http://localhost:8084/api/v1\";export var USER_NAME_SESSION_ATTRIBUTE_NAME=\"authenticatedUser\";var UserService=/*#__PURE__*/function(){function UserService(){_classCallCheck(this,UserService);this.validateUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password){var USER_API_BASE_URL,response,res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:USER_API_BASE_URL=\"http://localhost:8084/api/v1/users\";_context.next=3;return axios.get(USER_API_BASE_URL+'/'+email);case 3:response=_context.sent;res=response.data;if(!(res.password==password)){_context.next=11;break;}data={email:res.emailId,password:res.password,id:res.id};sessionStorage.setItem(USER_NAME_SESSION_ATTRIBUTE_NAME,JSON.stringify(data));return _context.abrupt(\"return\",true);case 11:return _context.abrupt(\"return\",false);case 12:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();this.getAllAds=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var user,USER_API_BASE_URL,response,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:user=JSON.parse(sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME));USER_API_BASE_URL=\"http://localhost:8084/api/v1/adv\";_context2.next=4;return axios.get(USER_API_BASE_URL,user.id);case 4:response=_context2.sent;res=response.data;console.log(res);return _context2.abrupt(\"return\",res);case 8:case\"end\":return _context2.stop();}}},_callee2);}));}_createClass(UserService,[{key:\"createUser\",value:function createUser(user){console.log(user);return axios.post(USER_API_BASE_URL.concat(\"/users\"),user);}},{key:\"createAd\",value:function createAd(advertisement){console.log(advertisement);return axios.post(USER_API_BASE_URL.concat(\"/adv\"),advertisement);}},{key:\"isUserLoggedIn\",value:function isUserLoggedIn(){var user=sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME);if(user.email==null)return false;else return true;}},{key:\"getLoggedInUserId\",value:function getLoggedInUserId(){var user=sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME);if(user.email==null)return'';else return user.id;}}]);return UserService;}();export default new UserService();","map":{"version":3,"sources":["/home/hritik/Desktop/spring-react/frontend/src/services/UserService.js"],"names":["axios","USER_API_BASE_URL","USER_NAME_SESSION_ATTRIBUTE_NAME","UserService","validateUser","email","password","get","response","res","data","emailId","id","sessionStorage","setItem","JSON","stringify","getAllAds","user","parse","getItem","console","log","post","concat","advertisement"],"mappings":"+nBAAA,MAAOA,CAAAA,KAAP,KAAkB,0BAAlB,CAEA,GAAMC,CAAAA,iBAAiB,CAAG,8BAA1B,CAEA,MAAO,IAAMC,CAAAA,gCAAgC,CAAG,mBAAzC,C,GAEDC,CAAAA,W,uFAaFC,Y,0FAAe,iBAAOC,KAAP,CAAaC,QAAb,0JAELL,iBAFK,CAEe,oCAFf,uBAIYD,CAAAA,KAAK,CAACO,GAAN,CAAUN,iBAAiB,CAAG,GAApB,CAA0BI,KAApC,CAJZ,QAILG,QAJK,eAMPC,GANO,CAMDD,QAAQ,CAACE,IANR,MAQRD,GAAG,CAACH,QAAJ,EAAgBA,QARR,2BAUHI,IAVG,CAUI,CAACL,KAAK,CAACI,GAAG,CAACE,OAAX,CAAoBL,QAAQ,CAACG,GAAG,CAACH,QAAjC,CAA2CM,EAAE,CAACH,GAAG,CAACG,EAAlD,CAVJ,CAWPC,cAAc,CAACC,OAAf,CAAuBZ,gCAAvB,CAAwDa,IAAI,CAACC,SAAL,CAAeN,IAAf,CAAxD,EAXO,gCAYA,IAZA,0CAeA,KAfA,yD,wEA+BfO,S,sEAAY,gLAEJC,IAFI,CAEGH,IAAI,CAACI,KAAL,CAAWN,cAAc,CAACO,OAAf,CAAuBlB,gCAAvB,CAAX,CAFH,CAGFD,iBAHE,CAGkB,kCAHlB,wBAKeD,CAAAA,KAAK,CAACO,GAAN,CAAUN,iBAAV,CAA6BiB,IAAI,CAACN,EAAlC,CALf,QAKFJ,QALE,gBAOJC,GAPI,CAOED,QAAQ,CAACE,IAPX,CAQRW,OAAO,CAACC,GAAR,CAAYb,GAAZ,EARQ,iCASDA,GATC,0D,sDA1CZ,oBAAWS,IAAX,CAAgB,CACZG,OAAO,CAACC,GAAR,CAAYJ,IAAZ,EACA,MAAOlB,CAAAA,KAAK,CAACuB,IAAN,CAAWtB,iBAAiB,CAACuB,MAAlB,CAAyB,QAAzB,CAAX,CAA8CN,IAA9C,CAAP,CACH,C,wBAED,kBAASO,aAAT,CACA,CACIJ,OAAO,CAACC,GAAR,CAAYG,aAAZ,EACA,MAAOzB,CAAAA,KAAK,CAACuB,IAAN,CAAWtB,iBAAiB,CAACuB,MAAlB,CAAyB,MAAzB,CAAX,CAA4CC,aAA5C,CAAP,CACH,C,8BAoBC,yBAAiB,CACf,GAAIP,CAAAA,IAAI,CAAGL,cAAc,CAACO,OAAf,CAAuBlB,gCAAvB,CAAX,CAEA,GAAGgB,IAAI,CAACb,KAAL,EAAc,IAAjB,CAAuB,MAAO,MAAP,CAAvB,IACK,OAAO,KAAP,CACR,C,iCAED,4BAAoB,CAChB,GAAIa,CAAAA,IAAI,CAAGL,cAAc,CAACO,OAAf,CAAuBlB,gCAAvB,CAAX,CACA,GAAIgB,IAAI,CAACb,KAAL,EAAc,IAAlB,CAAwB,MAAO,EAAP,CAAxB,IACK,OAAOa,CAAAA,IAAI,CAACN,EAAZ,CAER,C,2BAeL,cAAe,IAAIT,CAAAA,WAAJ,EAAf","sourcesContent":["import axios from '../../node_modules/axios';\n\nconst USER_API_BASE_URL = \"http://localhost:8084/api/v1\";\n\nexport const USER_NAME_SESSION_ATTRIBUTE_NAME = \"authenticatedUser\";\n\nclass UserService {\n\n    createUser(user){\n        console.log(user)\n        return axios.post(USER_API_BASE_URL.concat(\"/users\"),user);\n    }\n\n    createAd(advertisement)\n    {\n        console.log(advertisement)\n        return axios.post(USER_API_BASE_URL.concat(\"/adv\"),advertisement);\n    }\n\n    validateUser = async (email,password) => {\n\n        const USER_API_BASE_URL = \"http://localhost:8084/api/v1/users\";\n          \n        const response = await axios.get(USER_API_BASE_URL + '/' + email);\n          \n        let res = response.data;\n\n        if(res.password == password)\n        {\n            let data = {email:res.emailId, password:res.password, id:res.id};\n            sessionStorage.setItem(USER_NAME_SESSION_ATTRIBUTE_NAME,JSON.stringify(data));\n            return true;\n        }\n        else{\n            return false;\n        }\n      }\n      isUserLoggedIn() {\n        let user = sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME);\n\n        if(user.email == null) return false;\n        else return true;\n    }\n\n    getLoggedInUserId() {\n        let user = sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME);\n        if (user.email == null) return '';\n        else return user.id;\n\n    }\n    getAllAds = async () => {\n\n        let user = JSON.parse(sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME));\n        const USER_API_BASE_URL = \"http://localhost:8084/api/v1/adv\";\n          \n        const response = await axios.get(USER_API_BASE_URL ,user.id);\n          \n        let res = response.data;\n        console.log(res);\n        return res;\n    }\n\n}\n\nexport default new UserService()"]},"metadata":{},"sourceType":"module"}