{"ast":null,"code":"import _regeneratorRuntime from\"/home/hritik/Desktop/spring-react/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/hritik/Desktop/spring-react/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/hritik/Desktop/spring-react/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/hritik/Desktop/spring-react/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import axios from'../../node_modules/axios';var USER_API_BASE_URL=\"http://localhost:8084/api/v1\";export var USER_NAME_SESSION_ATTRIBUTE_NAME=\"authenticatedUser\";var UserService=/*#__PURE__*/function(){function UserService(){_classCallCheck(this,UserService);this.validateUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password){var USER_API_BASE_URL,response,res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:USER_API_BASE_URL=\"http://localhost:8084/api/v1/users\";_context.next=3;return axios.get(USER_API_BASE_URL+'/'+email);case 3:response=_context.sent;res=response.data;if(!(res.password==password)){_context.next=12;break;}data={email:res.emailId,password:res.password,id:res.id};sessionStorage.setItem(USER_NAME_SESSION_ATTRIBUTE_NAME,JSON.stringify(data));sessionStorage.setItem(\"id\",res.id);return _context.abrupt(\"return\",true);case 12:return _context.abrupt(\"return\",false);case 13:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();this.getAllAds=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var id,USER_API_BASE_URL,response,list;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:id=sessionStorage.getItem(\"id\");USER_API_BASE_URL=\"http://localhost:8084/api/v1/adv\";_context2.next=4;return axios.get(USER_API_BASE_URL+\"/\"+id);case 4:response=_context2.sent;list=response.data;return _context2.abrupt(\"return\",list);case 7:case\"end\":return _context2.stop();}}},_callee2);}));}_createClass(UserService,[{key:\"createUser\",value:function createUser(user){console.log(user);return axios.post(USER_API_BASE_URL.concat(\"/users\"),user);}},{key:\"createAd\",value:function createAd(advertisement){console.log(advertisement);return axios.post(USER_API_BASE_URL.concat(\"/adv\"),advertisement);}},{key:\"isUserLoggedIn\",value:function isUserLoggedIn(){var user=sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME);if(user.email==null)return false;else return true;}},{key:\"getLoggedInUserId\",value:function getLoggedInUserId(){var user=sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME);if(user.email==null)return'';else return user.id;}}]);return UserService;}();export default new UserService();","map":{"version":3,"sources":["/home/hritik/Desktop/spring-react/frontend/src/services/UserService.js"],"names":["axios","USER_API_BASE_URL","USER_NAME_SESSION_ATTRIBUTE_NAME","UserService","validateUser","email","password","get","response","res","data","emailId","id","sessionStorage","setItem","JSON","stringify","getAllAds","getItem","list","user","console","log","post","concat","advertisement"],"mappings":"+nBAAA,MAAOA,CAAAA,KAAP,KAAkB,0BAAlB,CAEA,GAAMC,CAAAA,iBAAiB,CAAG,8BAA1B,CAEA,MAAO,IAAMC,CAAAA,gCAAgC,CAAG,mBAAzC,C,GAEDC,CAAAA,W,uFAaFC,Y,0FAAe,iBAAOC,KAAP,CAAaC,QAAb,0JAELL,iBAFK,CAEe,oCAFf,uBAIYD,CAAAA,KAAK,CAACO,GAAN,CAAUN,iBAAiB,CAAG,GAApB,CAA0BI,KAApC,CAJZ,QAILG,QAJK,eAMPC,GANO,CAMDD,QAAQ,CAACE,IANR,MAQRD,GAAG,CAACH,QAAJ,EAAgBA,QARR,2BAUHI,IAVG,CAUI,CAACL,KAAK,CAACI,GAAG,CAACE,OAAX,CAAoBL,QAAQ,CAACG,GAAG,CAACH,QAAjC,CAA2CM,EAAE,CAACH,GAAG,CAACG,EAAlD,CAVJ,CAWPC,cAAc,CAACC,OAAf,CAAuBZ,gCAAvB,CAAwDa,IAAI,CAACC,SAAL,CAAeN,IAAf,CAAxD,EACAG,cAAc,CAACC,OAAf,CAAuB,IAAvB,CAA4BL,GAAG,CAACG,EAAhC,EAZO,gCAaA,IAbA,0CAgBA,KAhBA,yD,wEAgCfK,S,sEAAY,+KAEJL,EAFI,CAECC,cAAc,CAACK,OAAf,CAAuB,IAAvB,CAFD,CAGFjB,iBAHE,CAGkB,kCAHlB,wBAKeD,CAAAA,KAAK,CAACO,GAAN,CAAUN,iBAAiB,CAAC,GAAlB,CAAsBW,EAAhC,CALf,QAKFJ,QALE,gBAOJW,IAPI,CAOGX,QAAQ,CAACE,IAPZ,kCAQDS,IARC,0D,sDA3CZ,oBAAWC,IAAX,CAAgB,CACZC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACA,MAAOpB,CAAAA,KAAK,CAACuB,IAAN,CAAWtB,iBAAiB,CAACuB,MAAlB,CAAyB,QAAzB,CAAX,CAA8CJ,IAA9C,CAAP,CACH,C,wBAED,kBAASK,aAAT,CACA,CACIJ,OAAO,CAACC,GAAR,CAAYG,aAAZ,EACA,MAAOzB,CAAAA,KAAK,CAACuB,IAAN,CAAWtB,iBAAiB,CAACuB,MAAlB,CAAyB,MAAzB,CAAX,CAA4CC,aAA5C,CAAP,CACH,C,8BAqBC,yBAAiB,CACf,GAAIL,CAAAA,IAAI,CAAGP,cAAc,CAACK,OAAf,CAAuBhB,gCAAvB,CAAX,CAEA,GAAGkB,IAAI,CAACf,KAAL,EAAc,IAAjB,CAAuB,MAAO,MAAP,CAAvB,IACK,OAAO,KAAP,CACR,C,iCAED,4BAAoB,CAChB,GAAIe,CAAAA,IAAI,CAAGP,cAAc,CAACK,OAAf,CAAuBhB,gCAAvB,CAAX,CACA,GAAIkB,IAAI,CAACf,KAAL,EAAc,IAAlB,CAAwB,MAAO,EAAP,CAAxB,IACK,OAAOe,CAAAA,IAAI,CAACR,EAAZ,CAER,C,2BAaL,cAAe,IAAIT,CAAAA,WAAJ,EAAf","sourcesContent":["import axios from '../../node_modules/axios';\n\nconst USER_API_BASE_URL = \"http://localhost:8084/api/v1\";\n\nexport const USER_NAME_SESSION_ATTRIBUTE_NAME = \"authenticatedUser\";\n\nclass UserService {\n\n    createUser(user){\n        console.log(user)\n        return axios.post(USER_API_BASE_URL.concat(\"/users\"),user);\n    }\n\n    createAd(advertisement)\n    {\n        console.log(advertisement)\n        return axios.post(USER_API_BASE_URL.concat(\"/adv\"),advertisement);\n    }\n\n    validateUser = async (email,password) => {\n\n        const USER_API_BASE_URL = \"http://localhost:8084/api/v1/users\";\n          \n        const response = await axios.get(USER_API_BASE_URL + '/' + email);\n          \n        let res = response.data;\n\n        if(res.password == password)\n        {\n            let data = {email:res.emailId, password:res.password, id:res.id};\n            sessionStorage.setItem(USER_NAME_SESSION_ATTRIBUTE_NAME,JSON.stringify(data));\n            sessionStorage.setItem(\"id\",res.id);\n            return true;\n        }\n        else{\n            return false;\n        }\n      }\n      isUserLoggedIn() {\n        let user = sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME);\n\n        if(user.email == null) return false;\n        else return true;\n    }\n\n    getLoggedInUserId() {\n        let user = sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME);\n        if (user.email == null) return '';\n        else return user.id;\n\n    }\n    getAllAds = async () => {\n\n        let id = sessionStorage.getItem(\"id\");\n        const USER_API_BASE_URL = \"http://localhost:8084/api/v1/adv\";\n          \n        const response = await axios.get(USER_API_BASE_URL+\"/\"+id);\n          \n        let list = response.data;\n        return list;\n    }\n}\n\nexport default new UserService()"]},"metadata":{},"sourceType":"module"}